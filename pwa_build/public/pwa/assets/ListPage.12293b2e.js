import{p as I,o as r,b as c,C as U,E as D,d as e,h as j,q as E,u as o,e as l,F as z,y as R,_ as x,t as w,l as N,x as X,I as Y,r as f,G as Z,N as F,w as y,f as V,m as q,L as S,D as ee,c as te,n as se}from"./index.0e3c50f7.js";import{U as oe}from"./User.861bcd1c.js";const le={},A=p=>(U("data-v-d1174afc"),p=p(),D(),p),ae={class:"spinner",viewBox:"0 0 50 50"},ne=A(()=>e("defs",null,[e("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%","stop-color":"rgba(0,110,219,1)"}),e("stop",{offset:"100%","stop-color":"rgba(255,255,255,0)"})])],-1)),re=A(()=>e("circle",{stroke:"url(#gradient)",class:"spinner-path",cx:"25",cy:"25",r:"20",fill:"none","stroke-width":"5"},null,-1)),ce=[ne,re];function de(p,g){return r(),c("svg",ae,ce)}var ie=I(le,[["render",de],["__scopeId","data-v-d1174afc"]]);const ue={class:"bg-white h-[32rem] w-full rounded-lg mt-2 p-2"},pe={class:"h-[28rem] overflow-y-auto no-scrollbar"},_e={key:0,class:"flex justify-center text-center content-center"},me={class:"flex mt-[14rem]"},he=e("p",{class:"text-4 pl-2 text-gray-600"},"Loading",-1),ve={key:1},fe={key:0,class:"flex justify-center items-center h-full text-center"},xe=e("p",{class:"text-gray-600 text-sm mt-[14rem]"},"No Report Found",-1),be=[xe],ye={key:1},ge={class:"p-2 flex pt-2 items-center"},we={class:"flex flex-col pl-3"},ke={class:"text-black truncate w-[8rem]"},$e={class:"flex space-x-2"},Ce={class:"text-gray-600 text-[10px] truncate w-[4rem]"},Ve={class:"text-gray-600 text-[10px] truncate w-[4rem]"},qe={key:0,class:"ml-auto"},Ne={key:0,class:"p-1 pl-2 pr-2 bg-red-300 rounded-xl w-[4.3rem] text-center"},Le=e("p",{class:"text-[12px] text-red-700"},"Draft",-1),Pe=[Le],Fe={key:1,class:"p-1 pl-2 pr-2 bg-blue-300 rounded-xl"},Se=e("p",{class:"text-[12px] text-blue-700"},"Submitted",-1),Ie=[Se],Ue={key:2,class:"p-1 pl-2 pr-2 bg-red-300 rounded-xl"},De=e("p",{class:"text-[12px] text-red-700"},"Cancelled",-1),je=[De],Ee=["onClick"],ze={class:"border-gray-200 border-[1.5px] p-1 mb-2 mt-2 flex rounded-xl w-fit"},Re=e("p",{class:"text-[14px] pr-2 pl-2 hover:cursor-pointer"},"20",-1),Ae=[Re],Be=e("p",{class:"text-[14px] pr-2 pl-2 hover:cursor-pointer"},"100",-1),Te=[Be],Oe=e("p",{class:"text-[14px] pr-2 pl-2 hover:cursor-pointer"},"500",-1),Ge=[Oe],We={__name:"List",props:{reports:Array},emits:["handle-click","print-number"],setup(p,{emit:g}){const b=p,k=g,i=j();let _=!0;const $=d=>{k("handle-click",d)},m=d=>{k("print-number",d)};return E(()=>b.reports,d=>{d?_=!1:(_=!0,setTimeout(()=>{_&&window.confirm("Something went wrong! Would you like to go back?")&&i.push({name:"LandingPage"})},4e3))},{immediate:!0}),(d,h)=>(r(),c("div",ue,[e("div",pe,[o(_)?(r(),c("div",_e,[e("div",me,[l(o(ie),{class:"w-4"}),he])])):(r(),c("div",ve,[b.reports.length===0?(r(),c("div",fe,be)):(r(),c("div",ye,[(r(!0),c(z,null,R(b.reports,a=>(r(),c("div",{key:a.id,class:"border-gray-200 border-b-[1.5px]"},[e("div",ge,[l(o(x),{name:"file-text",class:"text-gray-600 h-5 w-5"}),e("div",we,[e("p",ke,w(a.name),1),e("div",$e,[e("p",Ce,w(a.owner),1),e("p",Ve,w(a.creation),1)])]),a.amended_from_value?(r(),c("div",qe,[a.docstatus===0?(r(),c("div",Ne,Pe)):a.docstatus===1?(r(),c("div",Fe,Ie)):a.docstatus===2?(r(),c("div",Ue,je)):N("",!0)])):N("",!0),e("div",{class:X(a.amended_from_value?"touchable ml-[20px]":"touchable ml-auto"),onClick:L=>$(a)},[l(o(x),{name:"arrow-right",class:"text-gray-600 h-5 w-5 hover:text-black hover:cursor-pointer"})],10,Ee)])]))),128))]))]))]),e("div",ze,[e("div",{class:"border-r-[1.5px] border-gray-200 touchable","data-number":"20",onClick:h[0]||(h[0]=a=>m(20))},Ae),e("div",{class:"border-r-[1.5px] border-gray-200 touchable","data-number":"100",onClick:h[1]||(h[1]=a=>m(100))},Te),e("div",{class:"touchable","data-number":"500",onClick:h[2]||(h[2]=a=>m(500))},Ge)])]))}};const He=p=>(U("data-v-1565ad7e"),p=p(),D(),p),Je={class:"w-full sm:w-96 bg-white flex flex-col items-center h-screen overflow-hidden"},Ke={class:"w-full sm:w-96 bg-white h-14 shadow-lg fixed top-0 z-10"},Me={class:"p-2 flex pt-3"},Qe={class:"font-semibold text-xl pt-[8px] pr-2 truncate w-[10rem]"},Xe={class:"w-full flex justify-end"},Ye={class:"p-1 pr-4"},Ze={class:"w-full flex-1 bg-gray-200 mt-14 overflow-hidden"},et={class:"p-4"},tt={class:"flex bg-white p-2 rounded-lg items-center"},st={class:"w-[10rem] ml-2"},ot={class:"ml-auto relative"},lt={key:0,class:"absolute -top-1 -right-1 bg-red-400 w-[13px] h-[13px] flex justify-center items-center rounded-2xl"},at={class:"text-[5px] text-white"},nt={class:"flex w-full sm:w-96 pb-5 pt-2 fixed bottom-0 z-10 bg-white justify-center shadow-lg"},rt={class:"pt-1 w-fit h-full"},ct=He(()=>e("h1",{class:"font-bold text-[25px]"},"Filters",-1)),dt={class:"flex p-[3rem] flex-col justify-center h-[10rem] mt-[1rem] overflow-y-auto no-scrollbar"},it={class:"p-2"},ut={class:"p-2"},pt={class:"p-2"},_t={class:"p-2 mt-1"},mt={class:"flex border-t-[1.5px] border-gray-200 p-2"},ht={__name:"ListPage",setup(p){const g=Y([]),b=j(),k=f(20),i=Z(),_=f(!1),$=f(""),m=f([]),d=f(null),h=f(0);E($,s=>{s?m.value=[[i.query.doctype,"name","like",`%${s}%`]]:m.value=[],a()});const a=()=>{const s=m.value.length!==0?m.value:[];h.value=m.value.length,d.value=te({url:"frappe.desk.reportview.get",method:"POST",params:{doctype:i.query.doctype,filters:s,fields:["*"],distinct:!1,start:0,page_length:k.value}}),d.value.fetch().then(()=>{if(d.value.data.length===0){g.value=[];return}const n=se({doctype:"PWA Form",fields:["is_submittable"],filters:{doctype_name:i.query.doctype}});n.reload().then(()=>{const t=n.data[0].is_submittable;g.value=d.value.data.values.map(v=>{const u={};return d.value.data.keys.forEach((M,Q)=>{u[M]=v[Q]}),{name:u.name,owner:u.owner,creation:u.creation,docstatus:u.docstatus,amended_from_value:t?1:0}})})})};a();const L=s=>{b.push({name:"Showform",query:{frmname:i.query.frmname,doctype:i.query.doctype,docname:s.name}})},P=f([]),B=()=>{b.push({name:"Form",query:{frmname:i.query.frmname,doctype:i.query.doctype}})},T=()=>{P.value=C.value.map(s=>{let n=s.selectedCondition,t="=",v=s.value;switch(n){case"equals":t="=";break;case"not_equals":t="!=";break;case"like":t="like",v=`%${v}%`;break;case"not_like":t="not like",v=`%${v}%`;break;default:t="="}return{field:s.selectedPerson,condition:t,value:v}}),m.value=P.value.map(s=>[i.query.doctype,s.field.value,s.condition,s.value]),a(),_.value=!1},O=s=>{k.value=s,a()},G=s=>{C.value.splice(s,1)},W=()=>{b.push({name:"LandingPage"})},H=()=>{a()},C=f([]),J=[{label:"Equals",value:"equals"},{label:"Not Equals",value:"not_equals"},{label:"Like",value:"like"},{label:"Not Like",value:"not_like"}],K=()=>{if(!d.value||!d.value.data)return;const s=d.value.data.keys.map(n=>({label:n,value:n}));C.value.push({options:s,selectedPerson:null,selectedCondition:"Equals",value:""})};return(s,n)=>(r(),c("div",Je,[e("div",Ke,[e("div",Me,[l(o(x),{class:"w-8 h-8 text-gray-600 hover:text-black",name:"chevron-left",onClick:W}),e("p",Qe,w(o(i).query.doctype),1),e("div",Xe,[e("div",Ye,[l(o(x),{class:"w-6 h-6 text-gray-600 hover:text-black",name:"bell"})]),l(oe)])])]),e("div",Ze,[e("div",et,[e("div",tt,[l(o(x),{name:"list",class:"w-5 h-5 text-gray-600"}),e("div",st,[l(o(F),{class:"truncate",type:"text",size:"sm",variant:"subtle",placeholder:"ID",modelValue:$.value,"onUpdate:modelValue":n[0]||(n[0]=t=>$.value=t)},null,8,["modelValue"])]),e("div",ot,[h.value>0?(r(),c("div",lt,[e("p",at,w(h.value),1)])):N("",!0),l(o(x),{name:"filter",class:"w-5 h-5 text-gray-600 hover:text-black hover:cursor-pointer",onClick:n[1]||(n[1]=t=>_.value=!0)})]),l(o(x),{name:"refresh-ccw",class:"w-5 h-5 text-gray-600 ml-[1rem] mr-2 hover:text-black hover:cursor-pointer",onClick:H})]),l(We,{reports:g.value,onHandleClick:L,onPrintNumber:O},null,8,["reports"])]),e("div",nt,[e("div",rt,[l(o(q),{variant:"solid",class:"w-[18rem] h-full p-2",onClick:B},{default:y(()=>[V("New "+w(o(i).query.doctype),1)]),_:1})])])]),l(o(ee),{modelValue:_.value,"onUpdate:modelValue":n[3]||(n[3]=t=>_.value=t),options:{size:"sm"}},{"body-title":y(()=>[ct]),"body-content":y(()=>[e("div",dt,[(r(!0),c(z,null,R(C.value,(t,v)=>(r(),c("div",{key:v,class:"flex p-2 justify-center"},[e("div",it,[l(o(S),{class:"truncate w-[5rem]",options:t.options,modelValue:t.selectedPerson,"onUpdate:modelValue":u=>t.selectedPerson=u,placeholder:"Field"},null,8,["options","modelValue","onUpdate:modelValue"])]),e("div",ut,[l(o(S),{class:"truncate w-[5rem]",options:J,modelValue:t.selectedCondition,"onUpdate:modelValue":u=>t.selectedCondition=u,placeholder:"Equals","hide-search":"true"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",pt,[l(o(F),{class:"truncate w-[5rem]",type:"text",size:"sm",variant:"subtle",placeholder:"value",modelValue:t.value,"onUpdate:modelValue":u=>t.value=u},null,8,["modelValue","onUpdate:modelValue"])]),e("div",_t,[l(o(x),{name:"x",class:"w-5 h-5 text-gray-600 hover:text-black",onClick:u=>G(v)},null,8,["onClick"])])]))),128))])]),actions:y(()=>[e("div",mt,[l(o(q),{variant:"solid",class:"w-[4rem]",onClick:K},{default:y(()=>[V("Add")]),_:1}),l(o(q),{class:"ml-auto",variant:"solid",onClick:T},{default:y(()=>[V(" Confirm ")]),_:1}),l(o(q),{class:"ml-2",onClick:n[2]||(n[2]=t=>_.value=!1)},{default:y(()=>[V(" Close ")]),_:1})])]),_:1},8,["modelValue"])]))}};var xt=I(ht,[["__scopeId","data-v-1565ad7e"]]);export{xt as default};
