var N=(d,i,r)=>new Promise((u,m)=>{var y=n=>{try{x(r.next(n))}catch(h){m(h)}},o=n=>{try{x(r.throw(n))}catch(h){m(h)}},x=n=>n.done?u(n.value):Promise.resolve(n.value).then(y,o);x((r=r.apply(d,i)).next())});import{m as V,r as _,n as $,a,b as t,d as f,u as v,p,w as B,j as I,F as C,q as j,k as z,v as R,o as l,_ as g,f as U,l as q,t as w,x as F,y as T}from"./index-W_lnXAtG.js";import{f as S,U as A}from"./User-DRURSIwv.js";import"./Avatar.vue_vue_type_script_setup_true_lang-BYVCYYui.js";import"./Popover-D9lPCEKX.js";const k=d=>(F("data-v-92567228"),d=d(),T(),d),M={class:"w-full sm:w-96 bg-white flex justify-center h-screen"},Q={class:"w-full sm:w-96 bg-white h-14 shadow-lg fixed top-0 z-10"},G={class:"p-2 flex pt-3"},H=k(()=>t("p",{class:"font-semibold text-xl pt-[8px] pr-2 truncate w-[15rem]"},"Notification",-1)),J={class:"w-full flex justify-end"},K={class:"w-full flex flex-col mt-14 bg-gray-100"},O={class:"flex justify-between pl-8 pr-8 pt-8"},P={class:"flex"},W={class:"w-fit"},X={class:"flex"},Y={key:0,class:"w-full h-full p-4 flex-1 overflow-y-auto custom-scrollbar"},Z={key:0},D={key:0,class:"w-full p-2"},ee=["onClick"],te={class:"flex"},se={class:"font-medium"},ae={class:"text-sm mt-2 text-gray-600"},le={key:1,class:"h-full flex justify-center items-center"},oe=k(()=>t("p",{class:"text-gray-600"},"No notifications found.",-1)),ne=[oe],ce={key:1,class:"w-full h-full p-4 flex-1 overflow-y-auto custom-scrollbar"},ie={key:0},re={class:"flex"},de={class:"font-medium text-gray-600"},ue={class:"text-sm mt-2 text-gray-600"},me={key:1,class:"h-full flex justify-center items-center"},_e=k(()=>t("p",{class:"text-gray-600"},"No notifications found.",-1)),fe=[_e],pe={__name:"Notifications",setup(d){const i=_([]),r=_([]);_(!1);const u=_(!1),m=_({}),y=z(),o=_(!1);$(()=>N(this,null,function*(){S.form_list.forEach(e=>{m.value[e.doctype_name]=e.form_name});const s=["Email Queue"];S.form_list.forEach(e=>{s.push(e.doctype_name)});const c=R({doctype:"Notification Log",filters:{document_type:["in",s]},fields:["*"]});yield c.reload(),i.value=c.data.filter(e=>!e.read).map(e=>({title:e.document_type,message:e.subject,name:e.name,document_name:e.document_name,clearing:!1})),r.value=c.data.filter(e=>e.read).map(e=>({title:e.document_type,message:e.subject,name:e.name,document_name:e.document_name,clearing:!1}))}));const n=s=>{m.value[s.title]&&y.push({name:"Showform",query:{frmname:m.value[s.title],doctype:s.title,docname:s.documnet_name}})},h=s=>{R({doctype:"Notification Log"}).setValue.submit({name:s,read:1})},E=()=>{u.value=!0,i.value.forEach(s=>{h(s.name)}),setTimeout(()=>{i.value=[],u.value=!1},1e3)},L=()=>{y.back()};return(s,c)=>(l(),a("div",M,[t("div",Q,[t("div",G,[f(v(g),{class:"w-8 h-8 text-gray-600 hover:text-black",name:"chevron-left",onClick:L}),H,t("div",J,[f(A)])])]),t("div",K,[t("div",O,[t("div",null,[t("div",P,[f(v(g),{name:"inbox",class:"w-5 h-5 text-gray-700"}),t("p",{class:p(["pl-2 text-gray-700 hover:cursor-pointer",o.value?"":"font-semibold"]),onClick:c[0]||(c[0]=e=>o.value=!1)},"Un-seen",2)]),t("div",W,[t("div",{class:p(["h-[1px] rounded-lg w-[6rem]",o.value?"":"bg-black animate-slide-in"])},null,2)])]),t("div",null,[t("div",X,[f(v(g),{name:"mail",class:"w-5 h-5 text-gray-700"}),t("p",{class:p(["pl-2 text-gray-700 pr-6 hover:cursor-pointer",o.value?"font-semibold":""]),onClick:c[1]||(c[1]=e=>o.value=!0)},"Seen",2)]),t("div",{class:p(["h-[1px] rounded-lg w-[4.2rem]",o.value?"bg-black animate-slide-in":""])},null,2)])]),o.value?(l(),a("div",ce,[r.value.length>0?(l(),a("ul",ie,[(l(!0),a(C,null,j(r.value,(e,b)=>(l(),a("li",{key:b,class:p({"transition-all duration-500 transform translate-x-full opacity-0":u.value||e.clearing,"bg-white p-4 my-2 rounded  touchable transition-all duration-500 ease-in-out":!0})},[t("div",re,[t("p",de,w(e.title),1)]),t("p",ue,w(e.message),1)],2))),128))])):(l(),a("div",me,fe))])):(l(),a("div",Y,[i.value.length>0?(l(),a("ul",Z,[i.value.length>1?(l(),a("div",D,[f(v(q),{class:"ml-[16.5rem]",variant:"solid",size:"sm",onClick:E},{default:B(()=>[U(" Read all ")]),_:1})])):I("",!0),(l(!0),a(C,null,j(i.value,(e,b)=>(l(),a("li",{key:b,onClick:he=>n(e),class:p({"transition-all duration-500 ease-in-out transform translate-x-full opacity-0":u.value||e.clearing,"bg-white p-4 my-2 rounded hover:cursor-pointer touchable transition-all duration-500 ease-in-out":!0})},[t("div",te,[t("p",se,w(e.title),1),f(v(g),{name:"eye-off",class:"h-3 w-3 mt-1 ml-auto mr-2 text-gray-700"})]),t("p",ae,w(e.message),1)],10,ee))),128))])):(l(),a("div",le,ne))]))])]))}},be=V(pe,[["__scopeId","data-v-92567228"]]);export{be as default};
