var ie=Object.defineProperty;var C=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var z=(t,n,o)=>n in t?ie(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,E=(t,n)=>{for(var o in n||(n={}))K.call(n,o)&&z(t,o,n[o]);if(C)for(var o of C(n))q.call(n,o)&&z(t,o,n[o]);return t};var F=(t,n)=>{var o={};for(var r in t)K.call(t,r)&&n.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&C)for(var r of C(t))n.indexOf(r)<0&&q.call(t,r)&&(o[r]=t[r]);return o};import{r as I,V as h,g as A,W as ce,h as k,X as me,Y as de,Z as pe,$ as fe,a0 as ve,a1 as $,a2 as B,a3 as j,a4 as ge,a5 as H,n as be,a6 as he,a7 as ye,a8 as Ie,a9 as b,aa as R,ab as _e,ac as Q,ad as oe,ae as ke,m as le,l as xe,_ as U,e as w,o as _,B as S,w as M,d as P,G as Me,H as we,M as W,f as Se,t as L,p as Z,a as D,F as G,q as J,j as X,C as Y,b as De,s as N,k as Re,v as Pe,u as ee,A as te}from"./index-W_lnXAtG.js";import{_ as Te}from"./Avatar.vue_vue_type_script_setup_true_lang-BYVCYYui.js";import{s as Ce,i as Fe,u as $e,f as Ae,c as x,P as Be}from"./Popover-D9lPCEKX.js";let ae=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function ne(t){var n,o;let r=(n=t.innerText)!=null?n:"",d=t.cloneNode(!0);if(!(d instanceof HTMLElement))return r;let i=!1;for(let c of d.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),i=!0;let e=i?(o=d.innerText)!=null?o:"":r;return ae.test(e)&&(e=e.replace(ae,"")),e}function Oe(t){let n=t.getAttribute("aria-label");if(typeof n=="string")return n.trim();let o=t.getAttribute("aria-labelledby");if(o){let r=o.split(" ").map(d=>{let i=document.getElementById(d);if(i){let e=i.getAttribute("aria-label");return typeof e=="string"?e.trim():ne(i).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return ne(t).trim()}function Ee(t){let n=I(""),o=I("");return()=>{let r=h(t);if(!r)return"";let d=r.innerText;if(n.value===d)return o.value;let i=Oe(r).trim().toLowerCase();return n.value=d,o.value=i,i}}var Le=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Le||{}),Ne=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(Ne||{});function Ue(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let re=Symbol("MenuContext");function O(t){let n=Ie(re,null);if(n===null){let o=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,O),o}return n}let je=A({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:n,attrs:o}){let r=I(1),d=I(null),i=I(null),e=I([]),c=I(""),m=I(null),v=I(1);function y(a=s=>s){let s=m.value!==null?e.value[m.value]:null,l=ke(a(e.value.slice()),g=>h(g.dataRef.domRef)),u=s?l.indexOf(s):null;return u===-1&&(u=null),{items:l,activeItemIndex:u}}let p={menuState:r,buttonRef:d,itemsRef:i,items:e,searchQuery:c,activeItemIndex:m,activationTrigger:v,closeMenu:()=>{r.value=1,m.value=null},openMenu:()=>r.value=0,goToItem(a,s,l){let u=y(),g=Ae(a===x.Specific?{focus:x.Specific,id:s}:{focus:a},{resolveItems:()=>u.items,resolveActiveIndex:()=>u.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.disabled});c.value="",m.value=g,v.value=l!=null?l:1,e.value=u.items},search(a){let s=c.value!==""?0:1;c.value+=a.toLowerCase();let l=(m.value!==null?e.value.slice(m.value+s).concat(e.value.slice(0,m.value+s)):e.value).find(g=>g.dataRef.textValue.startsWith(c.value)&&!g.dataRef.disabled),u=l?e.value.indexOf(l):-1;u===-1||u===m.value||(m.value=u,v.value=1)},clearSearch(){c.value=""},registerItem(a,s){let l=y(u=>[...u,{id:a,dataRef:s}]);e.value=l.items,m.value=l.activeItemIndex,v.value=1},unregisterItem(a){let s=y(l=>{let u=l.findIndex(g=>g.id===a);return u!==-1&&l.splice(u,1),l});e.value=s.items,m.value=s.activeItemIndex,v.value=1}};return ce([d,i],(a,s)=>{var l;p.closeMenu(),me(s,de.Loose)||(a.preventDefault(),(l=h(d))==null||l.focus())},k(()=>r.value===0)),pe(re,p),fe(k(()=>ve(r.value,{0:$.Open,1:$.Closed}))),()=>{let a={open:r.value===0,close:p.closeMenu};return B({ourProps:{},theirProps:t,slot:a,slots:n,attrs:o,name:"Menu"})}}}),Ve=A({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:n,slots:o,expose:r}){var d;let i=(d=t.id)!=null?d:`headlessui-menu-button-${j()}`,e=O("MenuButton");r({el:e.buttonRef,$el:e.buttonRef});function c(p){switch(p.key){case b.Space:case b.Enter:case b.ArrowDown:p.preventDefault(),p.stopPropagation(),e.openMenu(),R(()=>{var a;(a=h(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(x.First)});break;case b.ArrowUp:p.preventDefault(),p.stopPropagation(),e.openMenu(),R(()=>{var a;(a=h(e.itemsRef))==null||a.focus({preventScroll:!0}),e.goToItem(x.Last)});break}}function m(p){switch(p.key){case b.Space:p.preventDefault();break}}function v(p){t.disabled||(e.menuState.value===0?(e.closeMenu(),R(()=>{var a;return(a=h(e.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(p.preventDefault(),e.openMenu(),Ue(()=>{var a;return(a=h(e.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let y=Ce(k(()=>({as:t.as,type:n.type})),e.buttonRef);return()=>{var p;let a={open:e.menuState.value===0},s=F(t,[]),l={ref:e.buttonRef,id:i,type:y.value,"aria-haspopup":"menu","aria-controls":(p=h(e.itemsRef))==null?void 0:p.id,"aria-expanded":e.menuState.value===0,onKeydown:c,onKeyup:m,onClick:v};return B({ourProps:l,theirProps:s,slot:a,attrs:n,slots:o,name:"MenuButton"})}}}),ze=A({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:n,slots:o,expose:r}){var d;let i=(d=t.id)!=null?d:`headlessui-menu-items-${j()}`,e=O("MenuItems"),c=I(null);r({el:e.itemsRef,$el:e.itemsRef}),Fe({container:k(()=>h(e.itemsRef)),enabled:k(()=>e.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function m(a){var s;switch(c.value&&clearTimeout(c.value),a.key){case b.Space:if(e.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),e.search(a.key);case b.Enter:if(a.preventDefault(),a.stopPropagation(),e.activeItemIndex.value!==null){let l=e.items.value[e.activeItemIndex.value];(s=h(l.dataRef.domRef))==null||s.click()}e.closeMenu(),oe(h(e.buttonRef));break;case b.ArrowDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(x.Next);case b.ArrowUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(x.Previous);case b.Home:case b.PageUp:return a.preventDefault(),a.stopPropagation(),e.goToItem(x.First);case b.End:case b.PageDown:return a.preventDefault(),a.stopPropagation(),e.goToItem(x.Last);case b.Escape:a.preventDefault(),a.stopPropagation(),e.closeMenu(),R(()=>{var l;return(l=h(e.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case b.Tab:a.preventDefault(),a.stopPropagation(),e.closeMenu(),R(()=>_e(h(e.buttonRef),a.shiftKey?Q.Previous:Q.Next));break;default:a.key.length===1&&(e.search(a.key),c.value=setTimeout(()=>e.clearSearch(),350));break}}function v(a){switch(a.key){case b.Space:a.preventDefault();break}}let y=ge(),p=k(()=>y!==null?(y.value&$.Open)===$.Open:e.menuState.value===0);return()=>{var a,s;let l={open:e.menuState.value===0},u=F(t,[]),g={"aria-activedescendant":e.activeItemIndex.value===null||(a=e.items.value[e.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(s=h(e.buttonRef))==null?void 0:s.id,id:i,onKeydown:m,onKeyup:v,role:"menu",tabIndex:0,ref:e.itemsRef};return B({ourProps:g,theirProps:u,slot:l,attrs:n,slots:o,features:H.RenderStrategy|H.Static,visible:p.value,name:"MenuItems"})}}}),Ke=A({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:n,attrs:o,expose:r}){var d;let i=(d=t.id)!=null?d:`headlessui-menu-item-${j()}`,e=O("MenuItem"),c=I(null);r({el:c,$el:c});let m=k(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===i:!1),v=Ee(c),y=k(()=>({disabled:t.disabled,get textValue(){return v()},domRef:c}));be(()=>e.registerItem(i,y)),he(()=>e.unregisterItem(i)),ye(()=>{e.menuState.value===0&&m.value&&e.activationTrigger.value!==0&&R(()=>{var f,T;return(T=(f=h(c))==null?void 0:f.scrollIntoView)==null?void 0:T.call(f,{block:"nearest"})})});function p(f){if(t.disabled)return f.preventDefault();e.closeMenu(),oe(h(e.buttonRef))}function a(){if(t.disabled)return e.goToItem(x.Nothing);e.goToItem(x.Specific,i)}let s=$e();function l(f){s.update(f)}function u(f){s.wasMoved(f)&&(t.disabled||m.value||e.goToItem(x.Specific,i,0))}function g(f){s.wasMoved(f)&&(t.disabled||m.value&&e.goToItem(x.Nothing))}return()=>{let V=t,{disabled:f}=V,T=F(V,["disabled"]),ue={active:m.value,disabled:f,close:e.closeMenu};return B({ourProps:{id:i,ref:c,role:"menuitem",tabIndex:f===!0?void 0:-1,"aria-disabled":f===!0?!0:void 0,onClick:p,onFocus:a,onPointerenter:l,onMouseenter:l,onPointermove:u,onMousemove:u,onPointerleave:g,onMouseleave:g},theirProps:E(E({},o),T),slot:ue,attrs:o,slots:n,name:"MenuItem"})}}});const qe={name:"Dropdown",props:{button:{type:Object,default:null},options:{type:Array,default:()=>[]},placement:{type:String,default:"left"}},components:{Menu:je,MenuButton:Ve,MenuItems:ze,MenuItem:Ke,Button:xe,FeatherIcon:U,Popover:Be},methods:{normalizeDropdownItem(t){let n=t.onClick||null;return!n&&t.route&&this.$router&&(n=()=>this.$router.push(t.route)),{label:t.label,icon:t.icon,group:t.group,component:t.component,onClick:n}},filterOptions(t){return(t||[]).filter(Boolean).filter(n=>n.condition?n.condition():!0).map(n=>this.normalizeDropdownItem(n))}},computed:{groups(){var n;return((n=this.options[0])!=null&&n.group?this.options:[{group:"",items:this.options}]).map((o,r)=>({key:r,group:o.group,hideLabel:o.hideLabel||!1,items:this.filterOptions(o.items)}))},dropdownTransition(){return{enterActiveClass:"transition duration-100 ease-out",enterFromClass:"transform scale-95 opacity-0",enterToClass:"transform scale-100 opacity-100",leaveActiveClass:"transition duration-75 ease-in",leaveFromClass:"transform scale-100 opacity-100",leaveToClass:"transform scale-95 opacity-0"}},popoverPlacement(){return this.placement==="left"?"bottom-start":this.placement==="right"?"bottom-end":this.placement==="center"?"bottom-center":"bottom"}}},He={key:0,class:"flex h-7 items-center px-2 text-sm font-medium text-gray-500"},Qe=["onClick"],We={class:"whitespace-nowrap"};function Ze(t,n,o,r,d,i){const e=w("Button"),c=w("MenuButton"),m=w("FeatherIcon"),v=w("MenuItem"),y=w("MenuItems"),p=w("Popover"),a=w("Menu");return _(),S(a,{as:"div",class:"relative inline-block text-left"},{default:M(({open:s})=>[P(p,{transition:i.dropdownTransition,show:s,placement:i.popoverPlacement},{target:M(()=>[P(c,{as:"div"},{default:M(()=>[t.$slots.default?Me(t.$slots,"default",we(W({key:0},{open:s}))):(_(),S(e,W({key:1,active:s},o.button),{default:M(()=>{var l;return[Se(L(o.button?((l=o.button)==null?void 0:l.label)||null:"Options"),1)]}),_:2},1040,["active"]))]),_:2},1024)]),body:M(()=>[P(y,{class:Z(["mt-2 min-w-40 divide-y divide-gray-100 rounded-lg bg-white shadow-2xl ring-1 ring-black ring-opacity-5 focus:outline-none",{"left-0 origin-top-left":o.placement=="left","right-0 origin-top-right":o.placement=="right","inset-x-0 origin-top":o.placement=="center"}])},{default:M(()=>[(_(!0),D(G,null,J(i.groups,l=>(_(),D("div",{key:l.key,class:"p-1.5"},[l.group&&!l.hideLabel?(_(),D("div",He,L(l.group),1)):X("",!0),(_(!0),D(G,null,J(l.items,u=>(_(),S(v,{key:u.label},{default:M(({active:g})=>[u.component?(_(),S(Y(u.component),{key:0,active:g},null,8,["active"])):(_(),D("button",{key:1,class:Z([g?"bg-gray-100":"text-gray-800","group flex h-7 w-full items-center rounded px-2 text-base"]),onClick:u.onClick},[u.icon&&typeof u.icon=="string"?(_(),S(m,{key:0,name:u.icon,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700","aria-hidden":"true"},null,8,["name"])):u.icon?(_(),S(Y(u.icon),{key:1,class:"mr-2 h-4 w-4 flex-shrink-0 text-gray-700"})):X("",!0),De("span",We,L(u.label),1)],10,Qe))]),_:2},1024))),128))]))),128))]),_:1},8,["class"])]),_:2},1032,["transition","show","placement"])]),_:3})}const Ge=le(qe,[["render",Ze]]),se=[{form_name:"Test Form",doctype_name:"Customer",file_name:"test_form.json"},{form_name:"Task",doctype_name:"Task",file_name:"task.json"}],Je={form_list:se},nt=Object.freeze(Object.defineProperty({__proto__:null,default:Je,form_list:se},Symbol.toStringTag,{value:"Module"})),Xe={__name:"User",setup(t){const n=k(()=>N.user);k(()=>N.roles);const o=I(""),r=I(window.location.href),d=Re(),i=k(()=>{const v=new URL(r.value);return`${v.protocol}//${v.hostname}`}),e=k(()=>o.value?`${i.value}${o.value}`:""),c=Pe({doctype:"User",fields:["*"],filters:{name:n.value}});c.reload().then(()=>{o.value=c.data[0].user_image||""});const m=[{group:"User Actions",items:[{label:"About",icon:()=>te(U,{name:"alert-circle"}),onClick:()=>{d.push("about")}},{label:"Logout",icon:()=>te(U,{name:"log-out"}),onClick:()=>{N.logout.submit()}}]}];return(v,y)=>(_(),D("div",null,[P(ee(Ge),{options:m,trigger:"click"},{default:M(()=>[P(ee(Te),{shape:"square",image:e.value,label:n.value,size:"xl",class:"cursor-pointer"},null,8,["image","label"])]),_:1})]))}},ot=le(Xe,[["__scopeId","data-v-48138705"]]);export{Ge as D,ot as U,nt as a,Je as f};
