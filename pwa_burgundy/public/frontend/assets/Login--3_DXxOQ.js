import{g as B,r as o,h as c,a as m,b as e,i as D,d as s,w as r,u as a,j as _,t as H,T as j,F as M,e as O,k as A,o as f,_ as w,f as h,s as S,l as T}from"./index-W_lnXAtG.js";import{_ as L}from"./FormControl.vue_vue_type_script_setup_true_lang-DwYvdCJj.js";import"./TextInput.vue_vue_type_script_setup_true_lang-CdzQ2H2L.js";import"./Popover-D9lPCEKX.js";const I={class:"w-full sm:w-96 bg-[#f4f5f7] flex justify-center items-center h-screen"},z={class:"w-full h-96 flex justify-center items-center"},J={class:"w-full object-center justify-center flex"},K=["src"],Q={class:"bg-white rounded-lg w-80 h-76 mt-4"},W={class:"p-4"},X={key:0,class:"text-red-500 text-xs pl-2"},Y={class:"relative"},Z={key:1,class:"text-red-500 text-xs pl-2"},ee={class:"w-full"},se=e("div",{class:"flex justify-center"},[e("p",{class:"text-xs p-1 text-gray-600"},"or")],-1),te={class:"fixed bottom-0 flex justify-end w-full sm:w-96"},le={key:0,class:"w-[20rem] sm:w-72 p-2 mb-4 text-sm leading-5 text-white bg-green-500 rounded-lg opacity-100 font-regular animate-slide-in flex items-center"},ae=e("span",{class:"ml-4"},"Login successfully",-1),oe={key:0,class:"w-[20rem] sm:w-72 p-2 mb-4 text-sm leading-5 text-white bg-red-500 rounded-lg opacity-100 font-regular animate-slide-in flex items-center"},ne=e("span",{class:"ml-4"},"Login failed",-1),me=B({__name:"Login",setup(re){const C=A(),u=o(""),p=o(""),v=o(!1),d=o(!1),i=o(!1),g=o(!1),x=c(()=>u.value.includes("@")||u.value==="Administrator"),y=c(()=>!!p.value),U=c(()=>v.value?"text":"password"),$=c(()=>v.value?"Hide":"Show"),E=()=>{v.value=!v.value},F=t=>{g.value=!0,!(!x.value||!y.value)&&S.login.submit({email:u.value,password:p.value}).then(l=>{d.value=!0,i.value=!1,setTimeout(()=>{d.value=!1,i.value=!1},1e3)}).catch(l=>{console.error(l),d.value=!1,i.value=!0,setTimeout(()=>{d.value=!1,i.value=!1},1e3)})},P=()=>{C.push("/signup")},b=o(""),R=o(window.location.href),q=c(()=>{const t=new URL(R.value);return`${t.protocol}//${t.hostname}`}),G=c(()=>`${q.value}/assets`),k=new Headers;k.append("Cookie","full_name=Guest; sid=Guest; system_user=no; user_id=Guest; user_image=");const N={method:"GET",headers:k,redirect:"follow"};return fetch(G.value,N).then(t=>t.text()).then(t=>{const n=new DOMParser().parseFromString(t,"text/html").querySelector('link[rel="shortcut icon"]');n&&(b.value=n.href)}).catch(t=>console.error(t)),(t,l)=>{const V=O("router-link");return f(),m(M,null,[e("div",I,[e("div",z,[e("div",null,[e("div",J,[e("img",{src:b.value,class:"w-16 h-16 object-cover rounded-lg"},null,8,K)]),e("div",Q,[e("div",W,[e("form",{class:"flex flex-col space-y-2 w-full",onSubmit:D(F,["prevent"])},[s(a(L),{required:"",type:"text",label:"User ID",name:"email",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=n=>u.value=n),placeholder:"johndoe@email.com",class:"p-2"},{prefix:r(()=>[s(a(w),{class:"w-4",name:"mail"})]),_:1},8,["modelValue"]),g.value&&!x.value?(f(),m("div",X," Enter a valid email ")):_("",!0),e("div",Y,[s(a(L),{required:"",label:"Password",name:"password",modelValue:p.value,"onUpdate:modelValue":l[1]||(l[1]=n=>p.value=n),type:U.value,placeholder:"••••••",class:"p-2 w-full"},{prefix:r(()=>[s(a(w),{class:"w-4",name:"lock"})]),_:1},8,["modelValue","type"]),e("span",{onClick:E,class:"absolute right-2 top-7 cursor-pointer text-gray-600 text-sm p-2"},H($.value),1)]),g.value&&!y.value?(f(),m("div",Z," Enter password ")):_("",!0),e("div",ee,[s(V,{to:"/forget-password",class:"pb-1 text-xs text-gray-600 justify-end flex pr-2 hover:underline"},{default:r(()=>[h(" Forgot Password? ")]),_:1})]),s(a(T),{loading:a(S).login.loading,variant:"solid",class:"w-full"},{default:r(()=>[h("Login")]),_:1},8,["loading"]),se,s(a(T),{variant:"subtle",class:"w-full",onClick:P},{default:r(()=>[h("Sign up")]),_:1})],32)])])])])]),e("div",te,[s(j,{name:"fade"},{default:r(()=>[d.value?(f(),m("div",le,[s(a(w),{class:"w-4 h-4 cursor-pointer mt-[2px] text-green-300",name:"check"}),ae])):_("",!0)]),_:1}),s(j,{name:"fade"},{default:r(()=>[i.value?(f(),m("div",oe,[s(a(w),{class:"w-4 h-4 cursor-pointer mt-[2px] text-red-300",name:"x",onClick:l[2]||(l[2]=n=>i.value=!1)}),ne])):_("",!0)]),_:1})])],64)}}});export{me as default};
